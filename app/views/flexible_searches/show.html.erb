<p id="notice"><%= notice %></p>

<p>
  <h1><%= @flexible_search.name %></h1>
</p>
<div style="float:left; display:flex;">
  <form action="<%= flexible_search_results_path %>" method="GET">
    <% @flexible_search.searchables.each do |s| %>
      <%= s %>
      <label for=s></label></br>
      <input type="text" name=s><br>
      <br>
    <% end %>
    <span>
      <input type="submit" value="Search"><br>
      <%= button_to 'Edit', edit_flexible_search_path(@flexible_search), class: 'btn btn-primary' %> <br>
      <%= button_to "Delete", @flexible_search, class: 'btn btn-danger', 
      method: :delete, data: { confirm: "Are you sure you want to delete this custom search?" } %>
      <%= button_to 'Back', flexible_searches_path, class: 'btn btn-primary' %>
    </span>
  </form>

  <%
=begin%>
 <% puts eval(@flexible_search.search_field).class %> 
<%
=end%>

<% puts  %>

  <table class="table">
    <thead>
      <tr>
        <% @flexible_search.searchables.each do |fs| %>
          <th scope="col"><%= fs %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @flexible_search.searchables.each do |s| %>
        <% if Deployment.column_names().include? s %>
          <tr>
          <% @deployments.each do |d| %>
            <td><%= d.send(s) %></td>
          <% end %>
          </tr>
        <% elsif SonobatOutput.column_names().include? s %>
          <tr>
          <% @sonobat_outputs.each do |so| %>
            <td><%= so.send(s) %></td>
          <% end %>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </div>
  <%
=begin%>
 <tbody>
    <% @sonobat_outputs.each do |so| %>
      <tr>
        <td><%= so.manual_idspp1 %></td>
        <td><%= so.manual_idspp2 %></td>
        <td><%= so.night %></td>
        <td><%= so.deployment.primary_contact.state.name %></td>
        <td><%= so.deployment.detector_location.sample_unit.code %></td>
        <td><%= so.deployment.detector_location.location_identifier %></td>

      </tr>
    <% end %>

  </tbody> 
<%
=end%>
</table>




